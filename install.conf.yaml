- defaults:
    link:
      create: true
      relink: true
      force: true

- clean: ['~']

- link:
    ~/.zshrc: zshrc
    ~/.vimrc: vimrc
    ~/.ideavimrc: ideavimrc
    ~/.vim: vim
    ~/.tmux.conf: tmux.conf
    ~/scripts: scripts
    ~/ansible-encrypted-ssh: ssh

- shell:
  - 
    command: "[ ! -d ~/.ssh ] && cp -r ~/ansible-encrypted-ssh ~/.ssh && ansible-vault decrypt ~/.ssh/id_ed25519 && rm ~/ansible-encrypted-ssh"
    description: If ~/.ssh does not exist, create it copy the encrypted ssh files and decrypt them. The command will fail if ~/.ssh already exists - please ignore.
    quiet: true
    stdin: true
    stdout: true
    sterr: false
